<div class="flex flex-col h-full relative">

  <div class="bg-gradient-to-r from-violet-500 to-sky-400 rounded-box p-0.5">
    <div class="py-1.5 px-0.5 bg-base-100 rounded-box">
      <div #publicMessagesContainer id="publicMessagesContainer"
        class="w-full h-full max-h-[310px] flex flex-col gap-2 flex-grow overflow-y-auto p-2 bg-base-100 rounded-box">
        @for (message of lastMessages; track message.id) {
        <div class="w-full px-2 py-1 flex flex-col justify-center max-w-[220px] 2xl:max-w-[390px]">
          <header class="2xl:text-base text-sm font-medium {{message.color}}">{{message.from_user_name}}</header>
          <p class="2xl:text-base text-sm font-normal break-words">{{message.text}}</p>
        </div>
        @if (!$last) {
        <div class="divider m-0"></div>
        }
        }

        @for (message of LiveMessages; track $index) {
        @if ($first) {
        <div class="divider m-0"></div>
        }
        <div class="w-full px-2 py-1 flex flex-col justify-center max-w-[220px] 2xl:max-w-[390px]">
          <header class="2xl:text-base text-sm font-medium {{message.color}}">{{message.from_user_name}}</header>
          <p class="2xl:text-base text-sm font-normal break-words">{{message.text}}</p>
        </div>
        @if (!$last) {
        <div class="divider m-0"></div>
        }
        }
      </div>
    </div>
  </div>

  <!-- <button #scrollButton class="scroll-to-bottom absolute bottom-12 right-3 btn btn-circle" (click)="scrollToBottom()" [style.display]="showScrollButton ? 'block' : 'none'"><i class='bx bx-chevrons-down bx-sm'></i></button> -->

  <emoji-mart set="google"></emoji-mart>


  <label
    class="input h-8 min-h-8 px-2 min-w-0 bg-neutral w-full mt-3 rounded-box flex items-center gap-0.5 text-base-100">
    <input type="text" class="w-full ml-1 min-w-0" placeholder="Escribe un mensaje..." [(ngModel)]="message"
      (keydown.enter)="sendMessage()" />
    <button class="btn btn-ghost btn-sm btn-circle">
      <i class='bx bx-smile bx-sm'></i>
    </button>
    <button class="btn btn-ghost btn-sm btn-circle" (click)="sendMessage()">
      <i class='bx bx-send bx-sm'></i>
    </button>
  </label>

</div>
